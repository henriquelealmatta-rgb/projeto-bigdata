# üìö Movies Big Data Pipeline - Documenta√ß√£o Completa

## üìã √çndice

1. [Vis√£o Geral](#vis√£o-geral)
2. [Arquitetura do Sistema](#arquitetura-do-sistema)
3. [Pipeline de Transforma√ß√£o](#pipeline-de-transforma√ß√£o)
4. [Estrutura de Dados](#estrutura-de-dados)
5. [Como Executar](#como-executar)

---

## üéØ Vis√£o Geral

Pipeline completo de Big Data para an√°lise do dataset "The Movies Dataset" do Kaggle, implementando:

- **Clean Architecture** (Domain, Application, Infrastructure, Presentation)
- **Medallion Architecture** (Bronze, Silver, Gold)
- **Multi-Cloud Ready** (AWS, Azure, GCP via Terraform)
- **Interface Web com IA** (Streamlit + Google Gemini)

---

## üèóÔ∏è Arquitetura do Sistema

### Estrutura em Camadas (Clean Architecture)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     PRESENTATION                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ   CLI Interface    ‚îÇ       ‚îÇ   Web Interface    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ   (pipeline_cli)   ‚îÇ       ‚îÇ   (Streamlit)      ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     APPLICATION                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ Ingestion  ‚îÇ  ‚îÇTransformation‚îÇ ‚îÇ   Loading      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  (Bronze)  ‚îÇ‚Üí ‚îÇ  (Silver)   ‚îÇ‚Üí‚îÇ   (Gold)       ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   INFRASTRUCTURE                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  Kaggle    ‚îÇ  ‚îÇ   Data     ‚îÇ  ‚îÇ  Config &      ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  Client    ‚îÇ  ‚îÇ Repository ‚îÇ  ‚îÇ  Settings      ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       DOMAIN                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  Entities  ‚îÇ  ‚îÇ      Exceptions                ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  (Movie)   ‚îÇ  ‚îÇ  (PipelineExceptions)          ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîÑ Pipeline de Transforma√ß√£o

### Etapa 1: Ingestion (Bronze Layer)

**Objetivo:** Extrair dados brutos do Kaggle sem transforma√ß√µes

**Processo:**
```
Kaggle API ‚Üí Download ZIP ‚Üí Extra√ß√£o ‚Üí data/raw/
```

**Arquivos Baixados:**
- `movies_metadata.csv` (32.85 MB) - Metadados de 45.466 filmes
- `credits.csv` (181.12 MB) - Elenco e equipe
- `keywords.csv` (5.94 MB) - Palavras-chave
- `ratings.csv` (676.68 MB) - Avalia√ß√µes de usu√°rios
- `ratings_small.csv` (2.33 MB) - Subset de avalia√ß√µes

**Total:** ~900 MB de dados brutos

**C√≥digo:**
```python
# src/application/ingestion/ingest_movies.py
def execute() -> dict:
    # 1. Autenticar com Kaggle API
    # 2. Listar arquivos do dataset
    # 3. Baixar dataset completo
    # 4. Extrair CSV files
    return statistics
```

---

### Etapa 2: Transformation (Silver Layer)

**Objetivo:** Limpar, validar e estruturar dados em formato otimizado

#### 2.1 Transforma√ß√£o de Filmes

**Input:** `movies_metadata.csv`  
**Output:** `movies.parquet`

**Transforma√ß√µes Aplicadas:**

1. **Parsing de JSON:**
   ```python
   # Converter strings JSON para listas
   belongs_to_collection ‚Üí collection_id, collection_name
   genres ‚Üí genre_ids, genre_names
   production_companies ‚Üí company_ids, company_names
   production_countries ‚Üí country_codes, country_names
   spoken_languages ‚Üí language_codes
   ```

2. **Limpeza de Dados:**
   ```python
   # Remover valores inv√°lidos
   - Budget = 0 ou NULL ‚Üí has_budget = False
   - Revenue = 0 ou NULL ‚Üí has_revenue = False
   - Status != 'Released' ‚Üí Filtrar
   - Release_date inv√°lida ‚Üí Filtrar
   ```

3. **C√°lculos Derivados:**
   ```python
   profit = revenue - budget
   roi = ((revenue - budget) / budget) * 100
   has_budget = budget > 0
   has_revenue = revenue > 0
   ```

4. **Convers√£o de Tipos:**
   ```python
   budget ‚Üí float64
   revenue ‚Üí float64
   runtime ‚Üí float64
   vote_average ‚Üí float64
   vote_count ‚Üí int64
   release_year ‚Üí int64
   ```

**Resultado:**
- 45.379 filmes v√°lidos (87 removidos)
- 30 colunas estruturadas
- Formato Parquet comprimido

#### 2.2 Transforma√ß√£o de Cr√©ditos

**Input:** `credits.csv`  
**Output:** `credits.parquet`

**Transforma√ß√µes:**

1. **Parsing de Cast:**
   ```python
   # JSON ‚Üí Lista estruturada
   cast = [
       {"id": int, "name": str, "character": str, "order": int}
   ]
   # Extrair top 5 atores por ordem
   ```

2. **Parsing de Crew:**
   ```python
   # JSON ‚Üí Lista estruturada
   crew = [
       {"id": int, "name": str, "job": str, "department": str}
   ]
   # Extrair diretor
   director = crew[job == "Director"].name
   ```

3. **Estrutura Final:**
   ```python
   movie_id | cast_ids | cast_names | crew_ids | director
   ```

**Resultado:**
- 45.476 registros
- 5 colunas estruturadas
- Cast e crew parseados

#### 2.3 Transforma√ß√£o de Keywords

**Input:** `keywords.csv`  
**Output:** `keywords.parquet`

**Transforma√ß√µes:**

1. **Parsing de Keywords:**
   ```python
   # JSON ‚Üí Lista de strings
   keywords = ["action", "hero", "superhero"]
   # Juntar com v√≠rgula
   keywords_str = "action, hero, superhero"
   ```

**Resultado:**
- 46.419 registros
- 3 colunas (movie_id, keyword_ids, keyword_names)

#### 2.4 Transforma√ß√£o de Ratings

**Input:** `ratings_small.csv`  
**Output:** `ratings.parquet`

**Transforma√ß√µes:**

1. **Convers√£o de Timestamp:**
   ```python
   timestamp ‚Üí datetime64
   ```

2. **Valida√ß√£o:**
   ```python
   rating ‚àà [0.5, 5.0]
   movie_id existe
   ```

**Resultado:**
- 100.004 avalia√ß√µes v√°lidas
- 4 colunas (userId, movieId, rating, timestamp)

---

### Etapa 3: Analytics Loading (Gold Layer)

**Objetivo:** Criar datasets agregados otimizados para an√°lise

#### 3.1 Yearly Analytics

**Processo:**
```python
movies + credits + keywords ‚Üí GROUP BY release_year
```

**Agrega√ß√µes:**
```sql
SELECT 
    release_year,
    COUNT(*) as movie_count,
    AVG(budget) as avg_budget,
    SUM(budget) as total_budget,
    AVG(revenue) as avg_revenue,
    SUM(revenue) as total_revenue,
    AVG(profit) as avg_profit,
    SUM(profit) as total_profit,
    AVG(vote_average) as avg_rating,
    AVG(popularity) as avg_popularity,
    AVG(runtime) as avg_runtime
FROM movies_enriched
WHERE release_year IS NOT NULL
GROUP BY release_year
ORDER BY release_year
```

**Output:** `yearly_analytics.parquet`
- 120 registros (anos 1900-2020)
- 11 m√©tricas por ano

#### 3.2 Genre Analytics

**Processo:**
```python
movies ‚Üí EXPLODE genre_names ‚Üí GROUP BY genre
```

**Agrega√ß√µes:**
```sql
SELECT 
    genre_name,
    COUNT(*) as movie_count,
    AVG(budget) as avg_budget,
    AVG(revenue) as avg_revenue,
    AVG(profit) as avg_profit,
    AVG(vote_average) as avg_rating,
    AVG(popularity) as avg_popularity,
    SUM(revenue) as total_revenue,
    AVG(roi) as avg_roi
FROM movies_with_genres
GROUP BY genre_name
ORDER BY movie_count DESC
```

**Output:** `genre_analytics.parquet`
- 20 g√™neros
- 9 m√©tricas por g√™nero

#### 3.3 Top Movies

**Processo:**
```python
# Top 100 por cada m√©trica
top_revenue = movies.nlargest(100, 'revenue')
top_profit = movies.nlargest(100, 'profit')
top_rating = movies.nlargest(100, 'vote_average')
```

**Output:** `top_movies.parquet`
- 300 registros (100 de cada tipo)
- 13 colunas com rank_type indicator

#### 3.4 Director Analytics

**Processo:**
```python
movies + credits ‚Üí GROUP BY director
```

**Agrega√ß√µes:**
```sql
SELECT 
    director,
    COUNT(*) as movie_count,
    AVG(budget) as avg_budget,
    SUM(revenue) as total_revenue,
    AVG(revenue) as avg_revenue,
    AVG(profit) as avg_profit,
    AVG(vote_average) as avg_rating,
    AVG(popularity) as avg_popularity,
    MAX(vote_average) as best_rating
FROM movies_with_director
WHERE director IS NOT NULL
GROUP BY director
HAVING movie_count >= 2
ORDER BY total_revenue DESC
```

**Output:** `director_analytics.parquet`
- 4.351 diretores
- 9 m√©tricas por diretor

#### 3.5 Movies Enriched

**Processo:**
```python
movies + credits + keywords ‚Üí LEFT JOIN
```

**Output:** `movies_enriched.parquet`
- 46.543 registros (todos os filmes + cr√©ditos + keywords)
- 33 colunas
- Dataset completo para an√°lises explorat√≥rias

---

## üìä Estrutura de Dados

### Compara√ß√£o por Camada

| Camada | Formato | Tamanho | Registros | Prop√≥sito |
|--------|---------|---------|-----------|-----------|
| **Bronze** | CSV | 900 MB | ~1M | Backup, auditoria |
| **Silver** | Parquet | 50 MB | ~240K | An√°lises explorat√≥rias |
| **Gold** | Parquet | 22 MB | ~51K | Dashboards, BI |

**Redu√ß√£o de armazenamento:** 900 MB ‚Üí 72 MB (**92% de economia**)

### Schema por Dataset

#### movies.parquet (Silver)
```
movie_id: int64
title: string
release_year: int64
release_date: date
budget: float64
revenue: float64
profit: float64
roi: float64
runtime: float64
vote_average: float64
vote_count: int64
popularity: float64
status: string
original_language: string
collection_id: int64 (nullable)
collection_name: string (nullable)
genre_ids: string
genre_names: string
company_ids: string
company_names: string
country_codes: string
country_names: string
language_codes: string
has_budget: bool
has_revenue: bool
homepage: string (nullable)
tagline: string (nullable)
overview: string
adult: bool
video: bool
```

#### yearly_analytics.parquet (Gold)
```
release_year: float64
movie_count: int64
avg_budget: float64
total_budget: float64
avg_revenue: float64
total_revenue: float64
avg_profit: float64
total_profit: float64
avg_rating: float64
avg_popularity: float64
avg_runtime: float64
```

---

## üöÄ Como Executar

### Pr√©-requisitos

1. **Python 3.10+**
2. **Credenciais Kaggle:**
   - Baixe `kaggle.json` de https://www.kaggle.com/settings
   - Coloque em `~/.kaggle/kaggle.json` (Linux/Mac) ou `%USERPROFILE%\.kaggle\kaggle.json` (Windows)

3. **Google Gemini API Key (opcional):**
   - Obtenha em: https://makersuite.google.com/app/apikey
   - Configure no `.env`: `GOOGLE_API_KEY=sua_chave`

### Instala√ß√£o

```bash
# Clonar reposit√≥rio
git clone <repo-url>
cd big-data

# Criar ambiente virtual
python -m venv venv
source venv/bin/activate  # Linux/Mac
.\venv\Scripts\Activate.ps1  # Windows

# Instalar depend√™ncias
pip install -r requirements.txt
```

### Execu√ß√£o do Pipeline

#### Op√ß√£o 1: Pipeline Completo
```bash
python -m src.main
```

#### Op√ß√£o 2: Por Etapas
```bash
# Etapa 1: Ingestion (Bronze)
python -m src.main --stage ingestion

# Etapa 2: Transformation (Silver)
python -m src.main --stage transformation

# Etapa 3: Loading (Gold)
python -m src.main --stage loading
```

### Interface Web

```bash
streamlit run app.py
```

Acesse: http://localhost:8501

**Funcionalidades:**
- üìä Dashboard com 9 gr√°ficos interativos
- üé¨ Explorador de filmes (tabela + cards)
- ü§ñ Chat com IA (Google Gemini)
- üìà Gera√ß√£o de gr√°ficos customizados via linguagem natural

---

## üìÅ Estrutura Final de Arquivos

```
big data/
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ raw/              # Bronze - 900 MB
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ movies_metadata.csv
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ credits.csv
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ keywords.csv
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ratings_small.csv
‚îÇ   ‚îú‚îÄ‚îÄ processed/        # Silver - 50 MB
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ movies.parquet
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ credits.parquet
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ keywords.parquet
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ratings.parquet
‚îÇ   ‚îî‚îÄ‚îÄ refined/          # Gold - 22 MB
‚îÇ       ‚îú‚îÄ‚îÄ yearly_analytics.parquet
‚îÇ       ‚îú‚îÄ‚îÄ genre_analytics.parquet
‚îÇ       ‚îú‚îÄ‚îÄ top_movies.parquet
‚îÇ       ‚îú‚îÄ‚îÄ director_analytics.parquet
‚îÇ       ‚îî‚îÄ‚îÄ movies_enriched.parquet
‚îÇ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ domain/           # Entidades e exce√ß√µes
‚îÇ   ‚îú‚îÄ‚îÄ application/      # Casos de uso (ingestion, transformation, loading)
‚îÇ   ‚îú‚îÄ‚îÄ infrastructure/   # Kaggle client, repositories, config
‚îÇ   ‚îî‚îÄ‚îÄ presentation/     # CLI
‚îÇ
‚îú‚îÄ‚îÄ terraform/            # IaC para AWS, Azure, GCP
‚îú‚îÄ‚îÄ app.py               # Interface Streamlit
‚îú‚îÄ‚îÄ requirements.txt     # Depend√™ncias Python
‚îî‚îÄ‚îÄ README.md           # Documenta√ß√£o principal
```

---

## üéØ M√©tricas de Performance

### Tempo de Execu√ß√£o

| Etapa | Tempo | Descri√ß√£o |
|-------|-------|-----------|
| Ingestion | ~30s | Download + extra√ß√£o |
| Transformation | ~90s | Parsing + limpeza |
| Loading | ~10s | Agrega√ß√µes |
| **Total** | **~2.5 min** | Pipeline completo |

### Qualidade dos Dados

| M√©trica | Valor |
|---------|-------|
| Filmes totais baixados | 45.466 |
| Filmes v√°lidos processados | 45.379 |
| Taxa de sucesso | 99.8% |
| Registros duplicados removidos | 0 |
| Valores inv√°lidos tratados | 87 |

---

## üîç Insights dos Dados

### Tend√™ncias Temporais (1990-2017)

- **Crescimento de produ√ß√£o:** 435 ‚Üí 2.057 filmes/ano (+373%)
- **Receita total:** $5.7B (1990) ‚Üí $33.4B (2016) (+478%)
- **Receita m√©dia/filme:** Est√°vel em ~$14-16M

### Top G√™neros
1. Drama - 8.805 filmes
2. Comedy - 5.258 filmes
3. Thriller - 3.210 filmes

### Top Diretores (por receita)
1. Steven Spielberg - $4.1B
2. Peter Jackson - $3.0B
3. Christopher Nolan - $2.9B

---

## üìö Tecnologias Utilizadas

- **Python 3.12** - Linguagem principal
- **Pandas** - Manipula√ß√£o de dados
- **PyArrow** - Formato Parquet
- **Pydantic** - Valida√ß√£o de dados
- **Streamlit** - Interface web
- **Plotly** - Visualiza√ß√µes interativas
- **Google Gemini** - IA generativa
- **Terraform** - Infrastructure as Code
- **Kaggle API** - Fonte de dados

---

## ‚úÖ Conclus√£o

Pipeline completo implementando:
- ‚úÖ Clean Architecture
- ‚úÖ Medallion Architecture (Bronze ‚Üí Silver ‚Üí Gold)
- ‚úÖ 92% de redu√ß√£o de armazenamento
- ‚úÖ Valida√ß√£o e limpeza de dados
- ‚úÖ Agrega√ß√µes otimizadas
- ‚úÖ Interface web interativa
- ‚úÖ IA para an√°lises em linguagem natural
- ‚úÖ Multi-cloud ready

**Dados processados:** 900 MB ‚Üí 72 MB  
**Tempo total:** ~2.5 minutos  
**Qualidade:** 99.8% de dados v√°lidos  
**Visualiza√ß√µes:** 9 gr√°ficos + IA generativa

